<div i18n:domain="bes.lims">

  <form class="form-inline"
        id="daterangefilter"
        name="daterangefilter"
        method="POST">

    <div class="d-flex align-items-center mr-3">
      <span i18n:translate="" class="font-weight-bold mr-2">
        Date Range:
      </span>
      
      <!-- Bootstrap Switch Toggle -->
      <div class="form-check form-switch">
        <input class="form-check-input" 
               type="checkbox" 
               role="switch" 
               id="dateFilterToggle"
               name="filter_enabled"
               value="1"
               onchange="this.form.submit()"
               tal:attributes="checked python: 'checked' if view.is_filter_enabled() else None">
        <label class="form-check-label sr-only" for="dateFilterToggle">
          Toggle Date Filter
        </label>
      </div>
    </div>

    <!-- Date filter controls - conditionally displayed -->
    <div tal:condition="python: view.is_filter_enabled()" 
         class="d-flex align-items-center flex-wrap">

    <!-- Date type selector -->
    <label for="date_type" class="field mr-2"
           i18n:translate="">Filter date by</label>
    <select id="date_type"
            name="date_type"
            class="field mr-2"
            tal:define="date_types python: view.get_date_types();
                        selected_date_type python: view.get_date_type()">
        <option tal:repeat="date_type date_types"
                tal:attributes="value date_type;
                                selected python:'selected' if date_type == selected_date_type else None"
                tal:content="python: date_types.getValue(date_type)"/>
    </select>

    <!-- Date from -->
    <label for="date_from" class="field mr-2"
           i18n:translate="">From</label>
    <input type="date"
           class="form-control form-control-sm mr-1"
           id="date_from"
           name="date_from"
           tal:attributes="value python: view.get_date_from()"/>
    <input type="time"
           class="form-control form-control-sm mr-2"
           id="time_from"
           name="time_from"
           tal:attributes="value python: view.get_time_from()"/>

    <!-- Date to -->
    <label for="date_to" class="field mr-2"
           i18n:translate="">To</label>
    <input type="date"
           class="form-control form-control-sm mr-1"
           id="date_to"
           name="date_to"
           tal:attributes="value python: view.get_date_to()"/>
    <input type="time"
           class="form-control form-control-sm mr-2"
           id="time_to"
           name="time_to"
           tal:attributes="value python: view.get_time_to()"/>

    <button type="submit" i18n:translate=""
            class="btn btn-sm btn-outline-primary ml-2">Apply</button>

    </div> <!-- End conditional date filter controls -->

  </form>

</div>